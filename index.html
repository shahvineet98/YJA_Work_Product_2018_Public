<html>

<head>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.6/semantic.min.css">
    <link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.1.1.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>
    <style>
    .ui.form {
        margin: 0 auto;
    }

    body {
        background: #36D1DC;
        font-family: 'Montserrat', sans-serif;
    }

    .button {
        text-align: center;
    }

    .ui.form {
        background: #FFF;
        border-radius: 25px;
        padding: 20;
    }

    .ui.header {
        font-family: 'Montserrat', sans-serif;
        padding: 25;
        color: white;
    }
    </style>
</head>

<body>
    <h1 id="header" class="ui center aligned header">YJA Registration Form</h1>
    <div class="ui two column doubling grid container">
        <div class="ui form">
            <div class="two fields">
                <div class="field">
                    <label>First Name*</label>
                    <input type="text" name="first-name" id="first-name" placeholder="First Name">
                </div>
                <div class="field">
                    <label>Last Name*</label>
                    <input type="text" name="last-name" id="last-name" placeholder="Last Name">
                </div>
            </div>
            <div class="field">
                <label>Date of Birth*</label>
                <input type="text" name="dob" id="dob" placeholder="mm/dd/yyyy">
            </div>
            <div class="field">
                <label>Phone Number*</label>
                <input type="text" name="phone" id="phone" placeholder="xxx-xxx-xxxx">
            </div>
            <div class="field">
                <label>Email*</label>
                <input type="text" name="email" id="email" placeholder="Email">
            </div>
            <div class="field">
                <label>Shipping Address*</label>
                <div class="fields">
                    <div class="twelve wide field">
                        <input type="text" name="shipping[address]" id="shipping-address" placeholder="Street Address">
                    </div>
                    <div class="four wide field">
                        <input type="text" name="shipping[address-2]" id="shipping-address-2" placeholder="Apt #">
                    </div>
                </div>
            </div>
            <div class="two fields">
                <div class="field">
                    <label>State*</label>
                    <select class="ui fluid dropdown" name="state" id="state">
                        <option value="">State</option>
                        <option value="AL">Alabama</option>
                        <option value="AK">Alaska</option>
                        <option value="AZ">Arizona</option>
                        <option value="AR">Arkansas</option>
                        <option value="CA">California</option>
                        <option value="CO">Colorado</option>
                        <option value="CT">Connecticut</option>
                        <option value="DE">Delaware</option>
                        <option value="DC">District Of Columbia</option>
                        <option value="FL">Florida</option>
                        <option value="GA">Georgia</option>
                        <option value="HI">Hawaii</option>
                        <option value="ID">Idaho</option>
                        <option value="IL">Illinois</option>
                        <option value="IN">Indiana</option>
                        <option value="IA">Iowa</option>
                        <option value="KS">Kansas</option>
                        <option value="KY">Kentucky</option>
                        <option value="LA">Louisiana</option>
                        <option value="ME">Maine</option>
                        <option value="MD">Maryland</option>
                        <option value="MA">Massachusetts</option>
                        <option value="MI">Michigan</option>
                        <option value="MN">Minnesota</option>
                        <option value="MS">Mississippi</option>
                        <option value="MO">Missouri</option>
                        <option value="MT">Montana</option>
                        <option value="NE">Nebraska</option>
                        <option value="NV">Nevada</option>
                        <option value="NH">New Hampshire</option>
                        <option value="NJ">New Jersey</option>
                        <option value="NM">New Mexico</option>
                        <option value="NY">New York</option>
                        <option value="NC">North Carolina</option>
                        <option value="ND">North Dakota</option>
                        <option value="OH">Ohio</option>
                        <option value="OK">Oklahoma</option>
                        <option value="OR">Oregon</option>
                        <option value="PA">Pennsylvania</option>
                        <option value="RI">Rhode Island</option>
                        <option value="SC">South Carolina</option>
                        <option value="SD">South Dakota</option>
                        <option value="TN">Tennessee</option>
                        <option value="TX">Texas</option>
                        <option value="UT">Utah</option>
                        <option value="VT">Vermont</option>
                        <option value="VA">Virginia</option>
                        <option value="WA">Washington</option>
                        <option value="WV">West Virginia</option>
                        <option value="WI">Wisconsin</option>
                        <option value="WY">Wyoming</option>
                    </select>
                </div>
                <div class="field">
                    <label>Zip Code*</label>
                    <input type="text" name="zip-code" id="zip-code" placeholder="Zip Code">
                </div>
            </div>
            <div class="field">
                <label>Jain Center*</label>
                <select class="ui fluid dropdown" name="jain-center" id="jain-center">
                    <option value="2">AZ - Jain Center of Greater Phoenix - Phoenix</option>
                    <option value="4">CA - Jain Center of S. California - Los Angeles - Buena Park</option>
                    <option value="5">CA - Jain Society of Greater Sacramento - Elk Grove</option>
                    <option value="6">CA - Jain Center of Northern California - Milpitas</option>
                    <option value="7">CA - Jain Society of San Diego - Vista</option>
                    <option value="8">CO - Jain Center of Colorado - Arvada</option>
                    <option value="9">CT - Jain Center of Connecticut - Brookfield</option>
                    <option value="10">CT - Jain Center of Greater Hartford - Storrs</option>
                    <option value="11">FL - Jain Society of Central Florida - Altamonte Springs</option>
                    <option value="12">FL - Jain Center of Ft. Myers - Fort Myers</option>
                    <option value="13">FL - Jain Association of Northeast Florida - Jacksonville</option>
                    <option value="14">FL - Shree Mahavir Jain Sangh - Panama City Beach</option>
                    <option value="15">FL - Jain Society Inc. of Tampa Bay - Tampa</option>
                    <option value="16">FL - Jain Assoc.of Palm Beach &amp;Treasure Cst - Wellington</option>
                    <option value="17">FL - Jain Center of South Florida - Weston</option>
                    <option value="18">GA - Augusta Jain Community - Martinez</option>
                    <option value="19">GA - Jain Society of Greater Atlanta - Norcross</option>
                    <option value="20">IL - Jain Society of Metro Chicago - Bartlett</option>
                    <option value="21">KS - Jain Association of Kansas City - Lenexa</option>
                    <option value="22">LA - Jain Society of Southern Louisiana - Harvey</option>
                    <option value="23">MA - Jain Center of Greater Boston - Norwood</option>
                    <option selected="selected" value="24">MD - Jain Society of Metro Washington - Silver Spring</option>
                    <option value="25">MI - Jain Society of Greater Lansing - East Lansing</option>
                    <option value="26">MI - Jain Society of Greater Detroit - Farmington Hills</option>
                    <option value="27">MN - Jain Center of Minnesota - Maple Grove</option>
                    <option value="28">MO - Jain Center of Greater St. Louis - Saint Louis</option>
                    <option value="29">NC - Jain Center of Greater Charlotte - Charlotte</option>
                    <option value="30">NC - Jain Study Center of N. Carolina - Raleigh - Raleigh</option>
                    <option value="31">NJ - International Jain Sangh - Farmingdale</option>
                    <option value="32">NJ - Delaware Jain Sangh - Pennsauken</option>
                    <option value="33">NJ - Jain Sangh of N.J. - Cherry Hill - Pennsauken Township</option>
                    <option value="34">NJ - Jain Sangh of Atlantic City - Pomona</option>
                    <option value="35">NJ - Jain Center of N.J. - Franklin Township - Somerset</option>
                    <option value="36">NV - Jain Society of Las Vegas - Las Vegas</option>
                    <option value="37">NY - Jain Center of Syracuse - Baldwinsville</option>
                    <option value="39">NY - Jain Community of Buffalo - Grand Island</option>
                    <option value="40">NY - Jain Association of Elmira - Horseheads</option>
                    <option value="41">NY - Jain Society of Capitol District - Albany - Latham</option>
                    <option value="42">NY - Jain Society of Rochester - Macedon</option>
                    <option value="43">NY - Greater Binghamton Jain Sangh - Vestal</option>
                    <option value="44">NY - Jain Sangh of Hudson Valley - Wappingers Falls</option>
                    <option value="45">NY - Jain Center of America - NY - Elmhurst</option>
                    <option value="46">OH - Jain Center of Central Ohio - Columbus - Lewis Center</option>
                    <option value="47">OH - Jain Society of Greater Cleveland - Richfield</option>
                    <option value="48">OH - Jain Center of Toledo - Sylvania </option>
                    <option value="38">OH - Jain Center of Cincinnati / Dayton - Liberty Township</option>
                    <option value="49">OK - Tulsa Jain Sangh - Tulsa</option>
                    <option value="54">OR - Jain Society of Oregon - Portland</option>
                    <option value="55">PA - Jain Center of Allentown - Allentown</option>
                    <option value="56">PA - Jain Society of Pittsburgh - Monroeville</option>
                    <option value="57">PA - Jain Center of South Central PA - New Cumberland</option>
                    <option value="58">PA - Samarpan Jain Sangh - Philadelphia</option>
                    <option value="59">PA - Samarpan Jain Sangh - Hindu Temple - Philadelphia</option>
                    <option value="61">TN - Jain Society of Middle Tennessee - Clarksville</option>
                    <option value="62">TN - Jain Society of Greater Memphis - Germantown</option>
                    <option value="63">TX - Jain Society of N. Texas / Dallas - Dallas</option>
                    <option value="64">TX - Jain Society of Houston - Houston</option>
                    <option value="65">VA - Jain Temple of Virginia - Chantilly</option>
                    <option value="66">VA - Richmond Jain Society of Virginia - Glen Allen</option>
                    <option value="67">WI - Jain Religion Center of Wisconsin - Pewaukee</option>
                    <option value="68">Other</option>
                </select>
            </div>
            <div class="inline fields">
                <label for="fruit">Dietary Preferences*:</label>
                <div class="field">
                    <div class="ui radio checkbox">
                        <input id="vegetarian-radio" value="vegetarian" type="radio" name="preference" checked="" tabindex="0" class="hidden">
                        <label>Vegetarian</label>
                    </div>
                </div>
                <div class="field">
                    <div class="ui radio checkbox">
                        <input id="vegan-radio" value="vegan" type="radio" name="preference" tabindex="0" class="hidden">
                        <label>Vegan</label>
                    </div>
                </div>
                <div class="field">
                    <div class="ui radio checkbox">
                        <input id="jain-radio" value="jain" type="radio" name="preference" tabindex="0" class="hidden">
                        <label>Jain</label>
                    </div>
                </div>
            </div>
            <div class="field">
                <label>Any Special Needs?</label>
                <textarea id="special-needs" rows="2"></textarea>
            </div>
            <div class="ui success message">
                <div class="header">Form Completed</div>
                <p>You're all signed up for YJA!</p>
            </div>
            <button id="submit" class="ui green button" type="submit">Submit</button>
        </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.7/semantic.min.js"></script>
    <script>
    $('.ui.radio.checkbox')
        .checkbox();;

    $('.ui.form')
        .form({
            fields: {
                firstName: {
                    identifier: 'first-name',
                    rules: [{
                        type: 'empty',
                        prompt: 'Please enter your first name'
                    }]
                },
                lastName: {
                    identifier: 'last-name',
                    rules: [{
                        type: 'empty',
                        prompt: 'Please enter your last name'
                    }]
                },
                dateInput: {
                    identifier: 'dob',
                    rules: [{
                        type: "regExp[/^(0[1-9]|1[012])[/](0[1-9]|[12][0-9]|3[01])[/](19|20)\\d\\d$/]",
                        prompt: "Please select a valid mm/dd/yyyy date"
                    }]
                },
                email: {
                    identifier: 'email',
                    rules: [{
                        type: 'email',
                        prompt: 'Please enter a valid email'
                    }]
                },
                phone: {
                    identifier: 'phone',
                    rules: [{
                        type: 'empty',
                        prompt: 'Please enter a phone number'
                    }, ]
                },
                address: {
                    identifier: 'shipping[address]',
                    rules: [{
                        type: 'empty',
                        prompt: 'Please enter a valid street address'
                    }]
                },
                state: {
                    identifier: 'state',
                    rules: [{
                        type: 'empty',
                        prompt: 'Please select a state'
                    }]
                },
                zipCode: {
                    identifier: 'zip-code',
                    rules: [{
                        type: 'empty',
                        prompt: 'Please enter a valid zip code'
                    }]
                },
                jainCenter: {
                    identifier: 'jain-center',
                    rules: [{
                        type: 'empty',
                        prompt: 'Please select a jain center'
                    }]
                }
            }
        });

    $("#submit")
        .on("click", function() {
            var phone = $("#phone").val();
            phone = phone.replace(/[^0-9]/g, '');

            var diet = ""
            if ($('#vegetarian-radio').is(':checked')) {
                diet = "vegetarian";
            } else if ($('#vegan-radio').is(':checked')) {
                diet = "vegan";
            } else if ($('#jain-radio').is(':checked')) {
                diet = "jain";
            } else {
                diet = "vegetarian";
            }
            
             if (!$(".ui.form").form("is valid")) {
                 return;
            }
            $.ajax({
                type: "POST",
                url: "/user",
                data: {
                    firstName: $('#first-name').val(),
                    lastName: $('#last-name').val(),
                    dob: $('#dob').val(),
                    contactInfo: {
                        phone: phone,
                        email: $('#email').val(),
                        address: {
                            street_address: $('#shipping-address').val(),
                            street_address_2: $('#shipping-address-2').val(),
                            state: $('#state').val(),
                            zip: $('#zip-code').val()
                        }
                    },
                    jainCenter: $("#jain-center option:selected").text(),
                    dietaryPreferences: diet,
                    specialNeeds: $('#special-needs').val()
                },
                success: function(data) {
                    $('.ui.form').addClass('success')
                    console.log(data)
                }
            });
        });
    </script>
</body>

</html>